<% include ../layouts/header %>
<div ng-app="userApp">
    <div ng-controller="user">
	<form action="adduser" method="post" enctype="multipart/form-data" name="userform" novalidate>
		   <%
		   if(errors.length>0){
			   %>
			   <ul>
				 <%
				 for(var i=0; i<errors.length; i++){
					 %>
					 <li style="color:red">
						<%= errors[i] %>   
					 </li>
					 <%
				 }
				 %>
			   </ul>
			   <%
		   }
		   %>
		   
		   <div> 
			   <label>First Name</label>
			   <span>
				  <input type="text" name="first_name" value="<% if(typeof data.first_name!="undefined"){ %> <%= data.first_name;  %> <% } %>" ng-model="user.first_name" required/>
				  <p ng-show="submitted && userform.first_name.$invalid">Enter First Name</p>
			   </span>
		   </div>
		   
		   <div>
			 <label>Last Name</label>
			 <span>
			   <input type="text" name="last_name" value="<% if(typeof data.last_name!="undefined"){ %> <%= data.last_name;  %> <% } %>" ng-model="user.last_name" required/>
			   <p ng-show="submitted && userform.last_name.$invalid">Enter Last Name</p>
			 </span>
		   </div>
		   
		   <div>
			   <label>Email</label>
			   <span>
				  <input type="text" name="email" value="<% if(typeof data.email!="undefined"){ %> <%= data.email;  %> <% } %>" ng-model="user.email" required/>
				  <p ng-show="submitted && userform.email.$invalid">Enter Email</p>
			   </span>
		   </div>
		   
		   <div>
			   <label>Username</label>
			   <span>
				  <input type="text" name="username" value="<% if(typeof data.username!="undefined"){ %> <%= data.username;  %> <% } %>" ng-model="user.email" required/>
				  <p ng-show="submitted && userform.username.$invalid">Enter User Name</p>
			   </span>
		   </div>
		   
		   <div>
			   <label>Password</label>
			   <span>
				  <input type="password" name="password" value="" ng-model="user.password" required/>
				  <p ng-show="submitted && userform.password.$invalid">Enter Password</p>
			   </span>
		   </div>
		   
		   <div>
			 <label>Address</label>
			 <span>
			   <input type="text" name="address" value="<% if(typeof data.address!="undefined"){ %> <%= data.address;  %> <% } %>" ng-model="user.address" required/>
			   <p ng-show="submitted && userform.address.$invalid">Enter Address</p>
			 </span>
		   </div>

		   <div>
			 <label>Profile Image</label>
			 <span>
			   <input type="file" name="myprofile" value="" ng-model="user.profile"/>
			 </span>
		   </div>	   

		   <div>
			   <label>City</label>
			   <span>
				  <input type="text" name="city" value="<% if(typeof data.city!="undefined"){ %> <%= data.city;  %> <% } %>" ng-model="user.city" required/>
				  <p ng-show="submitted && userform.city.$invalid">Enter City</p>
			   </span>
		  </div>
		  
		  <div>
			 <label>State</label>
			 <span>
			   <input type="text" name="state" value="<% if(typeof data.state!="undefined"){ %> <%= data.state;  %> <% } %>" ng-model="user.state" required/>
			   <p ng-show="submitted && userform.state.$invalid">Enter State</p>
			 </span>
		  </div>
		   
		  <div> 
			 <label>Zipcode</label>
			 <span>
			   <input type="text" name="zip_code" value="<% if(typeof data.zipcode!="undefined"){ %> <%= data.zipcode;  %> <% } %>" ng-model="user.zipcode" required/>
			   <p ng-show="submitted && userform.zip_code.$invalid">Enter Zip Code</p>
			 </span> 
		  </div>
		  
		  <input type="button" ng-click="adduser()" value="Submit"/>
	</form>
	</div>
</div>
<% include ../layouts/footer %>

<script type="text/javascript">
   var app = angular.module('userApp' , []);
   app.controller("user" , function($scope){
     $scope.adduser = function(){
	     
         if($scope.userform.$valid){	 
            document.userform.submit(); 
		 }
         else {
		    $scope.submitted =true;
		 } 		 
	 }   
   });
</script>